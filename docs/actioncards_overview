# ActionCards – Operational Layer

ActionCards är det operativa lagret i SYSTEM-ALFA – där beslut, rutiner och erfarenheter blir användbara i vardagen.

## 1. Vad är ett ActionCard?

Ett ActionCard är:

- en strukturerad rutin för ett återkommande ärende
- beslutsstöd (enkelt → eskalerat)
- en samling av kollektiv erfarenhet
- en länkpunkt till relevanta styrdokument
- en ingång för förbättringsförslag

Minimikrav:

- ID & namn
- scope / typ av ärende
- decision paths (t.ex. simple / medium / high risk)
- checklistor
- dokumentreferenser
- kopplade processer
- feedback-kanal
- cluster_ids (tillhör kluster)
- owner_id (funktionell ägare)

---

## 2. Funktioner & kluster

För att säkerställa kvalitet samlas ActionCards i kluster under funktioner.

### OrgFunction

En funktion representerar en organisatorisk del, t.ex.:

- FUNC-HR – Human Resources
- FUNC-QUALITY – Quality & Safety

Varje funktion har:

- id
- name
- owner_id (funktionellt ansvarig)
- lista över kluster

### ActionCardCluster

Ett kluster samlar ActionCards inom ett område.

- id
- name
- function_id
- actioncard_ids[]
- review_policy (t.ex. var 6:e månad, triggers)

**Exempel (anonymt):**

```text
FUNC-HR
  └─ CLUSTER-PERSONNEL
      ├─ AC-PERSONNEL-01
      └─ AC-PERSONNEL-02

3. Lifecycle

En process (förbättringsarbete) tas fram och godkänns.

Processen kopplas till ett eller flera ActionCards.

ActionCards används av chefer/medarbetare i vardagen.

Feedback lämnas via ActionCard.

Funktionen (t.ex. FUNC-HR) reviewar klustret enligt policy.

Vid större behov startas nya processer – och loopen fortsätter.

4. Exempel

Se:

examples/actioncards_sim_anon.json för en anonymiserad simulering av ActionCards.

examples/anon_system_simulation.json för kopplingen mellan processer och ActionCards i SYSTEM-ALFA.


---

## 7. src/python/core_models.py

**Fil:** `src/python/core_models.py`

```python
from dataclasses import dataclass
from typing import List, Optional, Dict, Any


# --- Dokument och deltagare --- #

@dataclass
class DocumentRef:
    id: str
    title: str
    doc_type: str   # "GUIDELINE", "POLICY", "CHECKLIST", "LAW", etc.
    uri: str
    mandatory: bool = False
    metadata: Dict[str, Any] = None


@dataclass
class Participant:
    id: str
    role: str       # "process_owner", "team_member", "observer", etc.
    node_id: Optional[str] = None


# --- Funktioner, kluster och ActionCards --- #

@dataclass
class OrgFunction:
    id: str
    name: str
    owner_id: str
    description: str = ""
    cluster_ids: List[str] = None


@dataclass
class ActionCardCluster:
    id: str
    name: str
    function_id: str
    description: str
    actioncard_ids: List[str]
    review_policy: Dict[str, Any] = None


@dataclass
class DecisionPath:
    id: str
    name: str                     # "Simple case", "Medium complexity", etc.
    criteria: Dict[str, Any]      # ex: {"severity": "low", "repetition": False}
    actions: List[str]            # mänskliga steg
    escalation_to: Optional[str] = None  # ex: "HR", "Legal"


@dataclass
class ActionCard:
    id: str
    name: str
    scope: str
    process_ids: List[str]
    owner_id: str
    decision_paths: List[DecisionPath]
    checklist_items: List[str]
    documents: List[DocumentRef]
    feedback_channel: str
    cluster_ids: List[str]
    metadata: Dict[str, Any] = None


# --- Processmodeller --- #

@dataclass
class Metric:
    id: str
    name: str
    description: str = ""
    value: Optional[float] = None
    unit: Optional[str] = None
    metadata: Dict[str, Any] = None


@dataclass
class Checkpoint:
    id: str
    name: str
    description: str
    status: str  # "NOT_STARTED" | "IN_PROGRESS" | "DONE"
    created_at: Optional[str] = None
    completed_at: Optional[str] = None
    completed_by: Optional[str] = None
    metrics: List[Metric] = None


@dataclass
class ProcessPlan:
    purpose: str
    goals: List[str]
    checkpoint_ids: List[str]
    owner_id: str
    participants: List[Participant]
    documents: List[DocumentRef]
    validated: bool = False


@dataclass
class ProcessModel:
    id: str
    name: str
    description: str
    owner_id: str
    supervisor_id: str
    status: str          # "NOT_STARTED" | "UNDER_WORK" | "PENDING_DECISION" | "APPROVED" | "DRIFT"
    plan: ProcessPlan
    checkpoints: List[Checkpoint]
    actioncard_ids: List[str]
    metadata: Dict[str, Any] = None
